<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy New Year</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
height:100vh;
overflow:hidden;
font-family:Inter,system-ui;
color:white;
text-align:center;
}

/* BACKGROUND BUMI â€“ TERANG */
body::before{
content:"";
position:fixed;
inset:0;
background:url("https://awsimages.detik.net.id/community/media/visual/2020/05/14/30440740-1343-4e4e-9a9d-780604ec553d.jpeg?w=1200")
center/cover no-repeat;
z-index:-2;
}

/* CANVAS */
canvas{
position:fixed;
inset:0;
pointer-events:none;
z-index:1;
}

/* CONTENT */
.container{
position:absolute;
top:50%;
left:50%;
transform:translate(-50%,-50%);
z-index:5;
width:90%;
max-width:900px;
padding:40px;
border-radius:24px;
background:rgba(0,0,0,.18);
backdrop-filter:blur(4px);
}

h1{
font-family:"Playfair Display",serif;
font-size:clamp(2.8em,6vw,4em);
margin-bottom:12px;
}

p{
font-size:1.2em;
margin-bottom:22px;
}

.countdown span{
display:inline-block;
padding:10px 14px;
margin:6px;
background:rgba(255,255,255,.25);
border-radius:14px;
}

button{
margin-top:20px;
padding:12px 26px;
border-radius:16px;
border:none;
background:rgba(255,255,255,.25);
color:white;
cursor:pointer;
}

audio{display:none}
</style>
</head>

<body>

<canvas id="fw"></canvas>

<div class="container">
<h1 id="title">Welcoming a New Year</h1>
<p id="text">Different lives. Different places. One shared future.</p>

<button id="share">Share this moment</button>

<div class="countdown">
<span id="d">0</span>Days
<span id="h">0</span>Hours
<span id="m">0</span>Minutes
<span id="s">0</span>Seconds
</div>
</div>

<audio id="music" loop>
<source src="musik.mp3">
</audio>

<script>
/* MUSIC */
document.body.addEventListener("click",()=>{
music.play();
},{once:true});

/* SHARE */
share.onclick=()=>{
const data={
title:"Happy New Year",
text:text.textContent,
url:location.href
};
navigator.share
? navigator.share(data)
: window.open("https://wa.me/?text="+encodeURIComponent(data.text+"\n"+data.url));
};

/* ===== TARGET 1 JANUARI 00:00 (LOKAL SETIAP NEGARA) ===== */
const now = new Date();
const target = new Date(now.getFullYear()+1, 0, 1, 0, 0, 0).getTime();

let fired=false;
let fireInterval=null;

setInterval(()=>{
let diff = target - Date.now();

if(diff <= 0){
title.textContent="Happy New Year ??";
text.textContent="One planet. One moment. One shared future.";

if(!fired){
fired=true;

/* firework jalan 12 detik */
fireInterval = setInterval(()=>{
boom(
Math.random()*innerWidth,
Math.random()*innerHeight,
180
);
},300);

setTimeout(()=>clearInterval(fireInterval),12000);
}
return;
}

d.textContent = Math.floor(diff/86400000);
h.textContent = Math.floor(diff/3600000)%24;
m.textContent = Math.floor(diff/60000)%60;
s.textContent = Math.floor(diff/1000)%60;
},1000);

/* ===== FIREWORK ENGINE ===== */
const canvas=document.getElementById("fw");
const ctx=canvas.getContext("2d");
resize();
window.onresize=resize;
function resize(){canvas.width=innerWidth;canvas.height=innerHeight}

let particles=[];

function boom(x,y,power=80){
for(let i=0;i<power;i++){
particles.push({
x,y,
vx:(Math.random()-0.5)*6,
vy:(Math.random()-0.5)*6,
life:120,
color:`hsl(${Math.random()*360},100%,60%)`
});
}
}

addEventListener("click",e=>boom(e.clientX,e.clientY));
addEventListener("dblclick",e=>boom(e.clientX,e.clientY,220));

(function loop(){
requestAnimationFrame(loop);
ctx.clearRect(0,0,canvas.width,canvas.height);
particles = particles.filter(p=>{
p.x+=p.vx;
p.y+=p.vy;
p.life--;
ctx.fillStyle=p.color;
ctx.fillRect(p.x,p.y,3,3);
return p.life>0;
});
})();
</script>

</body>
</html>
